# Система мониторинга и тестирования Zabbix

## Скрипты для мониторинга

### Мониторинг сайтов

#### website_monitor.sh
Запуск проверки портов 80 и 443, а также статуса ошибок сайтов, указанных в списке.
- Проверяет доступность портов, статус HTTP/HTTPS
- Поддерживает параллельное сканирование всех сайтов
- Отправляет уведомления в Telegram при изменении статуса
- **Использование:** `bash -x website_monitor.sh` для полного лога

#### network_monitor.sh
Детальное сканирование сайтов с выводом подробной информации.
- Проверяет DNS, ping, HTTP/HTTPS статусы, заголовки, TCP порты
- Предоставляет рекомендации в случае проблем
- **Использование:** `./network_monitor.sh --test site.ru`

#### website_monitor_cron.sh
Обертка для запуска скрипта website_monitor.sh через планировщик cron.

### Мониторинг серверов и сервисов

#### zabbix_disk_monitor_levels-full.sh
Устанавливает триггеры на CPU, MEM, DISK, SWAP в Zabbix.

#### zabbix_network_monitor.sh
Устанавливает триггеры на пинг портов Minecraft.

#### zabbix_ru_translation_ru-ru.sh
Руссификация триггеров Zabbix.

#### restart-mysql-status.sh
Проверка работы MySQL с автоматическим перезапуском и уведомлением в Telegram.
- Запускается если не сработал триггер Zabbix по MySQL
- Обеспечивает дополнительный уровень надежности

### Стресс-тесты и обслуживание

#### stress_system.sh
Стресс-тест триггеров Zabbix по параметрам CPU, MEM, DISK, SWAP.

#### cleanup_cache.sh
Удаление кеша после стресс-теста.

### Уведомления

#### telegram.sh
Отправка уведомлений для триггеров CPU, MEM, DISK, SWAP.

#### telegram-network.sh
Отправка уведомлений для триггеров по серверам Minecraft.

#### telegram-php-nginx-mysql.sh
Отправка уведомлений для триггеров по сервисам PHP, MySQL, Nginx.

## Особенности

- **Параллельное сканирование:** Все сайты проверяются одновременно для более быстрого выполнения
- **Оптимизация проверок:** Уменьшенное количество ping-запросов (2), сокращенный timeout curl (3 сек)
- **Двухэтапная проверка:** Сначала быстрая проверка портов, затем детальное сканирование при необходимости
- **Надежные уведомления:** Каждый тип триггера имеет специальный скрипт для телеграм-уведомлений

## Использование

```bash
# Полная проверка сайта
./network_monitor.sh --test site.ru

# Запуск мониторинга всех сайтов в списке
./website_monitor.sh

# Запуск с детальным логированием
bash -x website_monitor.sh
```
